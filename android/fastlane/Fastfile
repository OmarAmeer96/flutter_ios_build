default_platform(:android)

platform :android do
  desc "Lane for Android Firebase App Distribution"
  lane :firebase_distribution do
    sh "flutter clean"
    sh "flutter build apk --release --flavor production --target lib/main_production.dart --no-tree-shake-icons"
    firebase_app_distribution(
      app: ENV["APP_ID"],
      firebase_cli_token: ENV["FIREBASE_CLI_TOKEN"],
      android_artifact_type: "APK",
      android_artifact_path: "../build/app/outputs/flutter-apk/app-production-release.apk",
      groups: "amantac-founders-group",
      release_notes: <<-NOTES
      ðŸŽ‰ðŸŽ‰ðŸŽ‰ AMANTAC "V1" is now available for testing! ðŸŽ‰ðŸŽ‰ðŸŽ‰

      ðŸ“ Please review the new features and let me know if you encounter any issues or have suggestions for improvements.

      Best regards,
      Omar Ameer ðŸ˜Š
      NOTES
    )
  end
end
